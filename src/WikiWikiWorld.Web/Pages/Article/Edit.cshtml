@page
@model WikiWikiWorld.Web.Pages.Article.EditModel
@{
	ViewData["Title"] = $"Editing: {Model.Title}";
	Model.AllowSearchEngineIndexingOfPage = false;
}
<article>
	<h1 class="title">Edit Article</h1>
	@if (!User.Identity?.IsAuthenticated ?? true)
	{
		<div class="alert alert-danger">
			You must be logged in to edit articles. <a href="/login">Login here</a>.
		</div>
	}
	else
	{
		@if (!string.IsNullOrEmpty(Model.ErrorMessage))
		{
			<div class="alert alert-danger">@Model.ErrorMessage</div>
		}
		<form method="post">
			<input type="hidden" asp-for="OriginalUrlSlug" />
			<div>
				<label for="Title">Title:</label>
				<input type="text" id="Title" asp-for="Title" required />
			</div>
			<div>
				<label for="DisplayTitle">Display Title:</label>
				<textarea id="DisplayTitle" asp-for="DisplayTitle" rows="3"></textarea>
			</div>
			<div>
				<label for="UrlSlug">URL Slug:</label>
				<input type="text" id="UrlSlug" asp-for="UrlSlug" required />
			</div>
			<div>
				<label for="SelectedType">Article Type:</label>
				<select id="SelectedType" asp-for="SelectedType" asp-items="@(new SelectList(Model.AvailableArticleTypes))"></select>
			</div>
			<div>
				<label for="ArticleText">Article Content:</label>
				<textarea id="ArticleText" asp-for="ArticleText" rows="20" required></textarea>
			</div>
			<button type="submit">Save Changes</button>
		</form>
		<form method="get" action="/Article/Delete">
			<input type="hidden" name="UrlSlug" value="@Model.OriginalUrlSlug" />
			<button type="submit" class="btn btn-danger">Delete Article</button>
		</form>
	}
</article>